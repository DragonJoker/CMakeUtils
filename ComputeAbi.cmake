include( CompilerVersion )
include( Logging )

if ( CMAKE_CXX_COMPILER_ID STREQUAL "Clang" )
	DumpCompilerVersion( COMPILER_VERSION )
	set( COMPILER "clang${COMPILER_VERSION}" )
elseif ( CMAKE_CXX_COMPILER_ID STREQUAL "AppleClang" )
	DumpCompilerVersion( COMPILER_VERSION )
	set( COMPILER "clang${COMPILER_VERSION}" )
elseif ( CMAKE_CXX_COMPILER_ID STREQUAL "GNU" )
	DumpCompilerVersion( COMPILER_VERSION )
	if ( MINGW )
		set( COMPILER "mingw${COMPILER_VERSION}" )
	elseif ( CYGWIN )
		set( COMPILER "cygw${COMPILER_VERSION}" )
	elseif ( APPLE )
		set( COMPILER "xgcc${COMPILER_VERSION}" )
	else ()
		set( COMPILER "gcc${COMPILER_VERSION}" )
	endif ()
elseif ( CMAKE_CXX_COMPILER_ID STREQUAL "Intel" )
	set( COMPILER "icc" )
elseif ( CMAKE_CXX_COMPILER_ID STREQUAL "Borland" )
	set( _ABI_Name "-bcb" )
elseif ( CMAKE_CXX_COMPILER_ID STREQUAL "MSVC" )
	if( MSVC70 )
		set( COMPILER "vc60" )
	elseif( MSVC70 )
		set( COMPILER "vc70" )
	elseif( MSVC71 )
		set( COMPILER "vc71" )
	elseif( MSVC80 )
		set( COMPILER "vc80" )
	elseif( MSVC90 )
		set( COMPILER "vc90" )
	elseif( MSVC10 )
		set( COMPILER "vc100" )
	elseif( MSVC11 )
		set( COMPILER "vc110" )
	elseif( MSVC12 )
		set( COMPILER "vc120" )
	elseif( MSVC_VERSION LESS 1910)
		set( COMPILER "vc140" )
	elseif( MSVC_VERSION LESS 1920)
		set( COMPILER "vc141" )
	elseif( MSVC_VERSION LESS 1930)
		set( COMPILER "vc142" )
	else()
		set( COMPILER "vc150" )
	endif()
endif()

#--------------------------------------------------------------------------------------------------
#	Function :	compute_abi_name
# 	Function which computes the extended library name, with compiler version and debug flag
#--------------------------------------------------------------------------------------------------
function( compute_abi_name ABI_Name ABI_Name_Debug )
	set( _ABI_Name "-${COMPILER}")
	set( _ABI_Name_Debug "-d")
	set( ${ABI_Name} ${_ABI_Name} PARENT_SCOPE )
	set( ${ABI_Name_Debug} ${_ABI_Name_Debug} PARENT_SCOPE )
endfunction( compute_abi_name )